# =============================================================================
# WordPress Client Helm Chart - Per-Client Isolated Architecture
# =============================================================================
# Each client gets their own:
#   - WordPress container
#   - MariaDB sidecar (isolated database)
#   - Valkey sidecar (Redis cache)
#   - Persistent storage for both wp-content and MySQL data
# =============================================================================

# Client-specific (REQUIRED - set these per deployment)
clientName: ""   # e.g., "acme-corp" - used for labels and identification
clientDomain: "" # e.g., "acme-corp.clients.yourdomain.com"
clientEmail: ""  # e.g., "client@example.com" - for notifications (future)

# Plan selection (basic, pro, enterprise)
plan: "basic"

# Plan-based resource tiers
# These define TOTAL namespace limits (WordPress + MariaDB + Valkey)
plans:
  basic:
    requests:
      cpu: "500m"
      memory: "768Mi"
    limits:
      cpu: "1500m"
      memory: "1536Mi"
    wpStorage: "5Gi"    # WordPress wp-content
    dbStorage: "2Gi"    # MariaDB data
  pro:
    requests:
      cpu: "1000m"
      memory: "1536Mi"
    limits:
      cpu: "3000m"
      memory: "3Gi"
    wpStorage: "20Gi"
    dbStorage: "5Gi"
  enterprise:
    requests:
      cpu: "2000m"
      memory: "3Gi"
    limits:
      cpu: "6000m"
      memory: "6Gi"
    wpStorage: "50Gi"
    dbStorage: "10Gi"

# =============================================================================
# WordPress Settings
# =============================================================================
wordpress:
  image:
    repository: wordpress
    tag: "6.7-php8.3-apache"
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: "100m"
      memory: "256Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

# =============================================================================
# MariaDB Sidecar (Per-Client Database)
# =============================================================================
mariadb:
  image:
    repository: mariadb
    tag: "11.4"
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: "100m"
      memory: "256Mi"
    limits:
      cpu: "500m"
      memory: "512Mi"

# =============================================================================
# Valkey Sidecar (Redis-compatible Cache)
# =============================================================================
valkey:
  image:
    repository: valkey/valkey
    tag: "8.0"
    pullPolicy: IfNotPresent
  resources:
    requests:
      cpu: "50m"
      memory: "64Mi"
    limits:
      cpu: "100m"
      memory: "128Mi"

# =============================================================================
# Storage
# =============================================================================
persistence:
  enabled: true
  storageClass: "nfs-rwx"

# =============================================================================
# Ingress (Traefik)
# =============================================================================
ingress:
  enabled: true
  className: "traefik"
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"

# =============================================================================
# Network Isolation
# =============================================================================
networkPolicy:
  enabled: true
